(this.webpackJsonpmunchkin=this.webpackJsonpmunchkin||[]).push([[0],{143:function(e,t,n){},144:function(e,t,n){},187:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"setMe",(function(){return W})),n.d(a,"setPlayers",(function(){return q})),n.d(a,"setGameStep",(function(){return Y}));var r=n(0),c=n.n(r),i=n(16),o=n.n(i),l=(n(143),n(23)),s=(n.p,n(144),n.p,n.p,n(49)),u=n(24),d=n(15),j=n(37),h=n(38),b=n(11);function m(e){return Array.from(Array(e).keys())}var f="MONSTRE",p="ITEM",O="MALEDICTION",v="MONSTRE",x="TROUBLE",g="LOOT",y="CHARITY",C="END",k=function e(t,n,a){Object(b.a)(this,e),this.name=t,this.type=n,this.inHand=!0},S=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(e,a,r,c,i){var o;return Object(b.a)(this,n),(o=t.call(this,e,p)).bonus=a,o.value=r,o.reserveA=c,o.interditA=i,o}return n}(k),w=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(e,a,r,c){var i;return Object(b.a)(this,n),(i=t.call(this,e,f)).level=a,i.levelGain=r,i.treasureGain=c,i}return n}(k),N=n(19),E=0,I=function(e){return Array.from(Array(e).keys())},D=I(11).map((function(e){return{index:E++,name:"Pi\xe8ce d'or",value:.5}})),M={index:E++,name:"squelette",value:1},T=I(4).map((function(e){return{index:E++,name:"Cailloux",value:0}})),P=function(){return I(7).map((function(e,t){return{index:E++,type:"Pierre pr\xe9cieuse",value:t+1}}))},G=[].concat(Object(N.a)(D),Object(N.a)(T),Object(N.a)(P()),Object(N.a)(P()),Object(N.a)(P()),Object(N.a)(P()),[M]),B=function(){function e(t){Object(b.a)(this,e),this.cards=t}return Object(d.a)(e,[{key:"isEmpty",get:function(){return 0===this.cards.lengthh}},{key:"nextCards",value:function(e){for(var t=[],n=0;n<e;n++)if(!this.isEmpty){var a=this.nextCard();t.push(a)}return t}},{key:"nextCard",value:function(){var e,t,n=(e=0,t=this.cards.length-1,Math.floor(Math.random()*(t-e+1)+e));return this.cards.splice(n,1)[0]}}]),e}(),A=function(){function e(t){Object(b.a)(this,e),this.name=t,this.level=1,this.cards=[],this.class=null,this.race="human"}return Object(d.a)(e,[{key:"bonuses",get:function(){return this.cards.filter((function(e){return e.type===p})).reduce((function(e,t){return e+=t.bonus}),0)}},{key:"fightLevel",get:function(){return this.level+this.bonuses}},{key:"cardsCount",get:function(){return this.cards.length}},{key:"addCards",value:function(e){var t=this;e.forEach((function(e){t.cards.push(e)}))}},{key:"addCard",value:function(e){this.cards.push(e)}},{key:"fight",value:function(e){return this.fightLevel>e.level}}]),e}(),F=m(10).map((function(e){var t=e+1,n=new w("Monster "+t,t,1,1);return n.index=e,n})),L=function(e){return m(e).map((function(e){var t=e+1,n=new S("Item "+t,t,100);return n.index=e,n}))}(30),J=new B(L),R=new A("Pge");R.addCards(J.nextCards(4));var z=new A("Noam");z.addCards(J.nextCards(4));var H=new A("Daoud");H.addCards(J.nextCards(4));var U=[R,z,H],V={title:"Munchkin",currentPlayer:null,gameStep:v,players:U,dungeonDeck:F,treasureDeck:L,cards:G,meName:"",me:Object(u.e)((function(e){return U.find((function(t){return t.name===e.meName}))}))},W=function(e,t){e.state.meName=t.name},q=function(e,t){e.state.players=t},Y=function(e,t){e.state.gameStep=t},K={state:V,actions:a},Q=Object(s.e)(),X=Object(s.b)(),Z=(Object(s.c)(),Object(s.d)(),n(230)),$=n(246),_=n(242),ee=n(233),te=n(255),ne=n(254),ae=n(249),re=n(247),ce=n(248),ie=n(243),oe=n(244),le=n(125),se=n(120),ue=n.n(se),de=n(238),je=n(121),he=n(253),be=n(245),me=n(189),fe=n(3);Object(Z.a)((function(e){return{root:{flexGrow:1},paper:{width:200}}}));Object(Z.a)((function(e){return{root:{flexGrow:1,margin:5,padding:5}}}));var pe=n(12),Oe=n(92),ve=n(237),xe=n(235),ge=n(190),ye=n(251),Ce=n(236),ke=Object(Z.a)((function(e){return{root:{display:"flex"},formControl:{margin:e.spacing(1)},paper:{margin:5,padding:15,width:300},text:{}}}));var Se=function(e){var t=e.player,n=ke(),a=c.a.useState({}),r=Object(l.a)(a,2),i=r[0],o=r[1],s=function(e){o(Object(Oe.a)(Object(Oe.a)({},i),{},Object(pe.a)({},e.target.name,e.target.checked)))};return t?Object(fe.jsxs)(me.a,{className:n.paper,children:[Object(fe.jsx)(le.a,{variant:"h4",gutterBottom:!0,children:t.name}),Object(fe.jsx)(ee.a,{children:"Niveau : ".concat(null===t||void 0===t?void 0:t.level)}),Object(fe.jsx)(ee.a,{children:"Bonuses : ".concat(t.bonuses)}),Object(fe.jsx)(ee.a,{children:"Combat : ".concat(t.fightLevel)}),Object(fe.jsxs)(xe.a,{component:"fieldset",className:n.formControl,children:[Object(fe.jsxs)(ge.a,{component:"legend",children:["Cartes ".concat(t.cards.length)," "]}),Object(fe.jsx)(Ce.a,{children:t.cards.map((function(e){return Object(fe.jsx)(ve.a,{value:e.name,control:Object(fe.jsx)(ye.a,{checked:i[e.name],onChange:s,name:e.name}),label:Object(fe.jsx)(le.a,{className:n.text,children:"".concat(e.name," Bonus: ").concat(e.bonus," Valeur: ").concat(e.value)})},e.index)}))})]})]}):null},we=(n(151),n(239)),Ne=n(252),Ee=Object(Z.a)((function(e){return{button:{display:"block",marginTop:e.spacing(2)},formControl:{margin:e.spacing(1),minWidth:120},paper:{margin:5,padding:15,width:200}}}));var Ie=function(e){var t=e.card,n=Ee(),a=c.a.useState(""),r=Object(l.a)(a,2),i=r[0],o=r[1],s=c.a.useState(!1),u=Object(l.a)(s,2),d=u[0],j=u[1],h=Q();return Object(fe.jsxs)(me.a,{className:n.paper,children:[Object(fe.jsx)(le.a,{variant:"h4",gutterBottom:!0,children:t.name}),Object(fe.jsx)(ee.a,{children:"Niveau : ".concat(t.level)}),Object(fe.jsx)(ee.a,{children:"Gain : ".concat(t.levelGain)}),Object(fe.jsx)(ee.a,{children:"Tr\xe9sors : ".concat(t.treasureGain)}),t.type===O&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)(xe.a,{className:n.formControl,children:[Object(fe.jsx)(we.a,{id:"demo-controlled-open-select-label",children:"Joueur"}),Object(fe.jsx)(Ne.a,{labelId:"demo-controlled-open-select-label",id:"demo-controlled-open-select",open:d,onClose:function(){j(!1)},onOpen:function(){j(!0)},value:i,onChange:function(e){o(e.target.value)},children:h.players.map((function(e){return Object(fe.jsx)(he.a,{value:e.name,children:e.name},e.name)}))})]}),Object(fe.jsx)(_.a,{children:"Envoyer"})]})]})},De=function(){function e(t,n,a){Object(b.a)(this,e),this.players=t,this.donjonDeck=n,this.treasureDeck=a}return Object(d.a)(e,[{key:"ouvrirPorte",value:function(e){if(this.donjonDeck.isEmpty)return{type:"empty"};var t=this.donjonDeck.nextCard();if(t.type===f){var n=e.fight(t);if(n){e.level+=t.levelGain;var a=this.treasureDeck.nextCard();return e.cards.push(a),{type:"fight",win:n,card:t,gameStep:e.cardsCount>5?y:C}}return e.level--,0===e.level?(e.dead=!0,{type:"dead",card:t}):{type:"fight",win:n,card:t}}return t.type===O?(e.curse(t),{gameStep:x}):e.cardsCount>5?{gameStep:y}:{gameStep:C}}},{key:"chercherBagarre",value:function(e){}},{key:"pillerPiece",value:function(e){}},{key:"charite",value:function(e){if(e.cardsCount>5){[].forEach((function(e){}))}}}]),e}();var Me=function(){var e=Q();return console.log("\ud83d\ude80 ~ file: Players.js ~ line 7 ~ Players ~ state",e),Object(fe.jsx)(ee.a,{container:!0,justify:"space-evenly",alignItems:"center",children:e.players.filter((function(t){var n;return t.name!==(null===(n=e.me)||void 0===n?void 0:n.name)})).map((function(e){return Object(fe.jsx)(ee.a,{item:!0,children:Object(fe.jsx)(Se,{player:e},e.name)})}))})},Te=Object(Z.a)((function(e){return{root:{flexGrow:1},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},zoom:{padding:"50px",transition:"transform .2s",margin:"0 auto","&:hover":{transform:"scale(2)"}}}})),Pe=new B(F),Ge=new B(L),Be=new De(U,Pe,Ge);var Ae=function(){var e=c.a.useState([]),t=Object(l.a)(e,2),n=(t[0],t[1],c.a.useState()),a=Object(l.a)(n,2),i=a[0],o=a[1],s=c.a.useState(),u=Object(l.a)(s,2),d=u[0],j=u[1],h=Object(r.useRef)(),b=c.a.useState(!1),m=Object(l.a)(b,2),f=m[0],p=m[1],O=c.a.useState(""),C=Object(l.a)(O,2),k=C[0],S=C[1],w=Te(),N=Q(),E=X(),I=c.a.useState(null),D=Object(l.a)(I,2),M=D[0],T=D[1],P=Boolean(M),G=N.me;Object(r.useEffect)((function(){var e=localStorage.getItem("name");S(null!==e&&void 0!==e?e:"");var t=N.players.find((function(t){return t.name===e}));t&&E.setMe(t)}),[]);var B=function(){p(!1)},A=function(){},F=function(){Be.pillerPiece()};return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(ie.a,{position:"static",children:Object(fe.jsxs)(oe.a,{children:[Object(fe.jsx)(de.a,{edge:"start",className:w.menuButton,color:"inherit","aria-label":"menu",onClick:function(e){T(e.currentTarget)},children:Object(fe.jsx)(ue.a,{})}),Object(fe.jsx)(le.a,{variant:"h6",className:w.title,children:"".concat(N.title," ").concat((null===G||void 0===G?void 0:G.name)?"du joueur "+(null===G||void 0===G?void 0:G.name):"")})]})}),Object(fe.jsxs)(je.a,{id:"fade-menu",anchorEl:M,keepMounted:!0,open:P,onClose:function(){T(null)},TransitionComponent:be.a,children:[Object(fe.jsx)(he.a,{onClick:function(){T(null),h.current.emit("newGame")},children:"Nouvelle partie"}),Object(fe.jsx)(he.a,{onClick:function(){T(null),p(!0)},children:"Jouer"})]}),Object(fe.jsxs)(ee.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:3,children:[Object(fe.jsxs)(ee.a,{item:!0,style:{width:"100%"},children:[Object(fe.jsx)(le.a,{variant:"h6",children:"Joueurs "}),Object(fe.jsx)(Me,{})]}),Object(fe.jsxs)(ee.a,{item:!0,container:!0,justify:"space-evenly",alignItems:"center",style:{border:"1px solid lightgray"},children:[Object(fe.jsx)(ee.a,{item:!0,children:"Donjon : ".concat(N.dungeonDeck.length)}),Object(fe.jsx)(ee.a,{item:!0,children:"Tr\xe9sors : ".concat(N.treasureDeck.length)})]}),Object(fe.jsx)($.a,{}),Object(fe.jsxs)(ee.a,{item:!0,container:!0,justify:"space-evenly",alignItems:"flex-start",style:{border:"1px solid lightgray"},children:[Object(fe.jsx)(ee.a,{item:!0,children:Object(fe.jsx)(Se,{player:N.me})}),Object(fe.jsx)(ee.a,{item:!0,children:d&&"Monstre vaincu : ".concat(d?"OUI":"NON")}),Object(fe.jsx)(ee.a,{item:!0,children:i&&Object(fe.jsx)(Ie,{card:i})})]}),Object(fe.jsxs)(ee.a,{item:!0,children:[Object(fe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){var e=Be.ouvrirPorte(U[0]);console.log("\ud83d\ude80 ~ file: App.js ~ line 167 ~ handleOpenDoor ~ result",e.type,e.win),"empty"!==e.type&&(j(e.win),o(e.card),E.setGameStep(e.gameStep))},disabled:!(N.gameStep===v),children:"Ouvrir porte"}),Object(fe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){Be.chercherBagarre()},disabled:!(N.gameStep===x),children:"Cherchez la bagarre"}),Object(fe.jsx)(_.a,{variant:"contained",color:"primary",onClick:F,disabled:!(N.gameStep===g),children:"Fouillez la pi\xe8ce"}),Object(fe.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){Be.charite()},disabled:!(N.gameStep===y),children:"Charit\xe9"})]}),Object(fe.jsxs)(ee.a,{item:!0,children:[Object(fe.jsx)(_.a,{variant:"contained",color:"primary",onClick:F,disabled:!1,children:"Vendre"}),Object(fe.jsx)(_.a,{variant:"contained",color:"primary",onClick:A,children:"Mal\xe9diction"})]}),Object(fe.jsx)(ee.a,{item:!0,children:Object(fe.jsx)(_.a,{variant:"contained",color:"primary",onClick:A,children:"Fin du tour"})}),Object(fe.jsxs)(ne.a,{open:f,onClose:B,"aria-labelledby":"form-dialog-title",children:[Object(fe.jsxs)(re.a,{children:[Object(fe.jsx)(ce.a,{children:"Entrez votre nom."}),Object(fe.jsx)(te.a,{autoFocus:!0,margin:"dense",id:"name",label:"Nom du joueur",type:"text",fullWidth:!0,value:k,onChange:function(e){S(e.target.value)}})]}),Object(fe.jsxs)(ae.a,{children:[Object(fe.jsx)(_.a,{onClick:B,color:"primary",children:"Annuler"}),Object(fe.jsx)(_.a,{onClick:function(){localStorage.setItem("name",k),p(!1)},color:"primary",disabled:0===k.length,children:"Ok"})]})]})]})]})},Fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,257)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},Le=Object(u.d)(K);o.a.render(Object(fe.jsx)(c.a.StrictMode,{children:Object(fe.jsx)(s.a,{value:Le,children:Object(fe.jsx)(Ae,{})})}),document.getElementById("root")),Fe()}},[[187,1,2]]]);
//# sourceMappingURL=main.54d991ce.chunk.js.map